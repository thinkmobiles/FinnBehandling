<div class="side-container" ng-form="hospitalForm" ng-click="editHospitalCtrl.closeTreatmentDialog()">

    <h3 class="blue">Legg til nytt senter</h3>

    <br/>

    <div class="row">
        <div class="col-md-2">* = må fylles ut</div>
        <div class="col-md-6">
            <select ng-model="editHospitalCtrl.hospital"
                    ng-options="item as item.name for item in editHospitalCtrl.hospitals"
                    ng-change="editHospitalCtrl.updateForm()"
                    >
                <option value="" disabled selected> Kopier eksisterende senter</option>
            </select>

        </div>
        <div class="col-md-2">
            <button class="pull-right blue" ng-click="editHospitalCtrl.resetFields()">Nullstill felter</button>
        </div>
    </div>

    <br/>

    <div class="row ">
        <div class="col-md-2">* Annonsetype:</div>
        <div class="col-md-6">
            <label class="radio-inline"><input type="radio" ng-model="editHospitalCtrl.hospital.is_paid" ng-value="true"
                                               name="adType">Betalt</label>
            <label class="radio-inline"><input type="radio" ng-model="editHospitalCtrl.hospital.is_paid"
                                               ng-value="false" name="adType">Standard</label>
        </div>
    </div>

    <br/>

    <div class="row">
        <div class="col-md-2"
             ng-class="{'form-invalid-label': hospitalForm.name.$invalid && editHospitalCtrl.isFormDirty}">
            * Navn på senter:
        </div>
        <div class="col-md-4">
            <input type="text"
                   name="name" class="form-control"
                   ng-model="editHospitalCtrl.hospital.name"
                   ng-class="{'form-invalid-border': hospitalForm.name.$invalid && editHospitalCtrl.isFormDirty}"
                   required/>
        </div>

        <div class=" col-md-2"
             ng-class="{'form-invalid-label': hospitalForm.city.$invalid && editHospitalCtrl.isFormDirty}">
            * Sted:
        </div>
        <div class="col-md-4">
            <input type="text" name="city" class="form-control"
                   ng-model="editHospitalCtrl.hospital.city"
                   ng-class="{'form-invalid-border': hospitalForm.city.$invalid && editHospitalCtrl.isFormDirty}"
                   required/>
        </div>
    </div>

    <br/>

    <div class="row">
        <div class="col-md-2"
             ng-class="{'form-invalid-label': hospitalForm.address.$invalid && editHospitalCtrl.isFormDirty}">
            * Adresse:
        </div>
        <div class="col-md-4">
            <input type="text" name="address" class="form-control"
                   ng-model="editHospitalCtrl.hospital.address"
                   ng-class="{'form-invalid-border': hospitalForm.address.$invalid && editHospitalCtrl.isFormDirty}"
                   required/>
        </div>

        <div class="col-md-2"
             ng-class="{'form-invalid-label': hospitalForm.postcode.$invalid && editHospitalCtrl.isFormDirty}">
            * Postnumber:
        </div>
        <div class="col-md-2">
            <input type="text" name="postcode" class="form-control"
                   ng-model="editHospitalCtrl.hospital.postcode"
                   ng-class="{'form-invalid-border': hospitalForm.postcode.$invalid && editHospitalCtrl.isFormDirty}"
                   ng-change="editHospitalCtrl.getRegion()"
                   ng-pattern="/\d{4}/"
                   maxlength="4"
                   required/>
        </div>
    </div>

    <br/>

    <div class="row">
        <div class="col-md-2"
             ng-class="{'form-invalid-label': hospitalForm.web_address.$invalid && editHospitalCtrl.isFormDirty}">
            * Nettside:
        </div>
        <div class="col-md-6">
            <input type="text" name="web_address" class="form-control"
                   ng-class="{'form-invalid-border': hospitalForm.web_address.$invalid && editHospitalCtrl.isFormDirty}"
                   ng-model="editHospitalCtrl.hospital.web_address"
                   required/>
        </div>
    </div>

    <br/>

    <div class="row">
        <div class="col-md-2"
             ng-class="{'form-invalid-label': editHospitalCtrl.isFormDirty && (hospitalForm.phone_prefix_1.$invalid || hospitalForm.phone_suffix_1.$invalid)}">
            * Telefon m. prefiks:
        </div>
        <div class="col-md-4">
            <div class="form-group col-xs-4">
                <input type="text" name="phone_prefix_1" class="form-control"
                       ng-class="{'form-invalid-border': hospitalForm.phone_prefix_1.$invalid && editHospitalCtrl.isFormDirty}"
                       ng-model="editHospitalCtrl.hospital.phones[0].prefix"
                       ng-pattern="/^[\+]{0,1}[0-9]{2,5}$/"
                       required/>
            </div>
            <div class="form-group col-xs-8">
                <input type="text" name="phone_suffix_1" class="form-control"
                       ng-class="{'form-invalid-border': hospitalForm.phone_suffix_1.$invalid && editHospitalCtrl.isFormDirty}"
                       ng-model="editHospitalCtrl.hospital.phones[0].suffix"
                       ng-pattern="/\d{5,8}/"
                       required/>
            </div>
        </div>

        <div class="col-md-2"
             ng-class="{'form-invalid-label': hospitalForm.email_1.$invalid && editHospitalCtrl.isFormDirty}">* E-post:
        </div>
        <div class="col-md-4">
            <input type="text" name="email_1" class="form-control"
                   ng-class="{'form-invalid-border': hospitalForm.email_1.$invalid && editHospitalCtrl.isFormDirty}"
                   ng-pattern="/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i"
                   ng-model="editHospitalCtrl.hospital.email[0]" required/>
        </div>
    </div>

    <br/>

    <div ng-show="editHospitalCtrl.hospital.is_paid">

        <!-- Contact 2 -->

        <div class="row">
            <div class="col-md-2"
                 ng-class="{'form-invalid-label': editHospitalCtrl.isFormDirty && (hospitalForm.phone_prefix_2.$invalid || hospitalForm.phone_suffix_2.$invalid)}">
                Telefon m. prefiks 2:
            </div>
            <div class="col-md-4">
                <div class="form-group col-xs-4">
                    <input type="text" name="phone_prefix_2" class="form-control"
                           ng-class="{'form-invalid-border': hospitalForm.phone_prefix_2.$invalid && editHospitalCtrl.isFormDirty}"
                           ng-model="editHospitalCtrl.hospital.phones[1].prefix"
                           ng-pattern="/^[\+]{0,1}[0-9]{2,5}$/"
                            />
                </div>
                <div class="form-group col-xs-8">
                    <input type="text" name="phone_suffix_2" class="form-control"
                           ng-class="{'form-invalid-border': hospitalForm.phone_suffix_2.$invalid && editHospitalCtrl.isFormDirty}"
                           ng-model="editHospitalCtrl.hospital.phones[1].suffix"
                           ng-pattern="/\d{5,8}/"
                            />
                </div>
            </div>

            <div class="col-md-2"
                 ng-class="{'form-invalid-label': hospitalForm.email_2.$invalid && editHospitalCtrl.isFormDirty}">*
                E-post 2:
            </div>
            <div class="col-md-4">
                <input type="text" name="email_2" class="form-control"
                       ng-class="{'form-invalid-border': hospitalForm.email_2.$invalid && editHospitalCtrl.isFormDirty}"
                       ng-pattern="/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i"
                       ng-model="editHospitalCtrl.hospital.email[1]"/>
            </div>
        </div>

        <br/>

        <!-- Contact 3 -->

        <div class="row">
            <div class="col-md-2"
                 ng-class="{'form-invalid-label': editHospitalCtrl.isFormDirty && (hospitalForm.phone_prefix_3.$invalid || hospitalForm.phone_suffix_3.$invalid)}">
                Telefon m. prefiks 3:
            </div>
            <div class="col-md-4">
                <div class="form-group col-xs-4">
                    <input type="text" name="phone_prefix_3" class="form-control"
                           ng-class="{'form-invalid-border': hospitalForm.phone_prefix_3.$invalid && editHospitalCtrl.isFormDirty}"
                           ng-model="editHospitalCtrl.hospital.phones[2].prefix"
                           ng-pattern="/^[\+]{0,1}[0-9]{2,5}$/"
                            />
                </div>
                <div class="form-group col-xs-8">
                    <input type="text" name="phone_suffix_3" class="form-control"
                           ng-class="{'form-invalid-border': hospitalForm.phone_suffix_3.$invalid && editHospitalCtrl.isFormDirty}"
                           ng-model="editHospitalCtrl.hospital.phones[2].suffix"
                           ng-pattern="/\d{5,8}/"
                            />
                </div>
            </div>

            <div class="col-md-2"
                 ng-class="{'form-invalid-label': hospitalForm.email_3.$invalid && editHospitalCtrl.isFormDirty}">*
                E-post 3:
            </div>
            <div class="col-md-4">
                <input type="text" name="email_3" class="form-control"
                       ng-class="{'form-invalid-border': hospitalForm.email_3.$invalid && editHospitalCtrl.isFormDirty}"
                       ng-pattern="/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i"
                       ng-model="editHospitalCtrl.hospital.email[2]"/>
            </div>
        </div>

        <br/>

        <div class="row">
            <div class="col-md-2">* Bilde:</div>

            <div class="col-md-6">
                <input
                    id="picture"
                    type="file"
                    name="picture"
                    accept="image/jpeg,image/png,image/gif"
                    fileread
                    crop-result="editHospitalCtrl.cropResult"
                    ng-change="editHospitalCtrl.checkImageType('picture')"
                    ng-model="editHospitalCtrl.hospital.picture"/>

                <div ng-show='editHospitalCtrl.hospital.picture' style="z-index: 2; position: relative; left: 0; top: 0; height: 200px; margin: 5px;">
                    <img ng-src="{{editHospitalCtrl.hospital.picture}}" width="150" height="150">
                </div>
            </div>

            <div class="col-md-2">Standardsymbol: <input type="checkbox" class="pull-right"
                                                         ng-model="editHospitalCtrl.hospital.standardSymbol"></div>
        </div>

        <br/>

    </div>

    <div class="row">
        <div class="col-md-2"
             ng-class="{'form-invalid-label': hospitalForm.description.$invalid && editHospitalCtrl.isFormDirty}">
            * Beskrivelse: <br/> (maks {{ editHospitalCtrl.getDescriptionMaxLength() }} tegn)
        </div>
        <div class="col-md-8">
            <textarea name="description" class="form-control" rows="5"
                      ng-class="{'form-invalid-border': hospitalForm.description.$invalid && editHospitalCtrl.isFormDirty}"
                      ng-model="editHospitalCtrl.hospital.description"
                      maxlength="{{ editHospitalCtrl.getDescriptionMaxLength() }}" required></textarea>

            <div class="pull-right text-muted">
                {{ editHospitalCtrl.hospital.description.length || 0 }}/{{editHospitalCtrl.getDescriptionMaxLength()}}
            </div>
        </div>
    </div>

    <br/>

    <div class="row">
        <div class="col-md-2"
             ng-class="{'form-invalid-label': !editHospitalCtrl.hospital.sub_treatments.length && editHospitalCtrl.isFormDirty}">
            * Hovedkategori:
        </div>
        <div class="col-md-10" ng-mouseenter="editHospitalCtrl.isMouseOverSubTreatment = true"
             ng-mouseleave="editHospitalCtrl.isMouseOverSubTreatment = false">
            <div ng-class="row" ng-repeat="treatment in editHospitalCtrl.treatments">
                <div class="col-md-3">
                    {{treatment.name}} <input class="pull-right" type="checkbox" ng-model="treatment.isSelected"
                                              ng-click="editHospitalCtrl.changeTreatmentSelection(treatment)">
                </div>
            </div>

            <div class="row" ng-show="editHospitalCtrl.isSubTreatmentOpen && editHospitalCtrl.subTreatments.length">
                <div class="side-container col-md-12 pull-right">
                    <div ng-class="row" ng-repeat="subTreatment in editHospitalCtrl.subTreatments">
                        <div class="col-md-3">
                            {{subTreatment.name}} <input class="pull-right" type="checkbox"
                                                         ng-model="subTreatment.isSelected"
                                                         ng-click="editHospitalCtrl.changeSubTreatmentSelection(subTreatment)">
                        </div>
                    </div>
                </div>
            </div>

        </div>


    </div>


    <br/>

    <div class="row">
        <button class="pull-right blue"
                ng-click="editHospitalCtrl.setFormDirty() && hospitalForm.$valid && editHospitalCtrl.persistHospital()">
            Lagre
        </button>
    </div>

    <br/>

</div>